
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_LayoutLogin.cshtml";
}

<style>
    h3 {
        color: fuchsia;
        text-align: center;
    }

   
    .btn-purple {
        background-color: purple;
        color: white;
        margin: 10px;
        text-align: center;
    }
</style>

<h2>Index</h2>

<<section class="vh-100 bg-dark">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-12 col-md-8 col-lg-6 col-xl-5">
                <div class="card shadow-2-strong" style="border-radius: 1rem;">
                    <div class="card-body p-5 text-center">
                        <form id="frm">
                            <h3 class="mb-1">Sign in</h3>
                            <hr class="mb-4">
                            <div class="form-floating mb-4">
                                <input type="text" class="form-control" id="txtUsuario" name="txtUsuario" placeholder="Usuario" />
                                <label class="form-label" for="txtUsuario">Usuario</label>
                            </div>

                            <div class="form-floating mb-4">
                                <input type="password" class="form-control" id="txtPassword" name="txtPassword" placeholder="Clave">
                                <label for="txtPassword">Clave</label>
                            </div>

                            <div class="d-grid gap-2">
                                <button class="btn btn-purple btn-lg" type="submit">Login</button>
                            </div>
                        </form>
                        <hr class="my-4">

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts

{

    
    <script>
        $(document).ready(function ()
        {
                   // 1. Capturar los valores del login
            $("#frm").submit(function (ev)
            {
                ev.preventDefault();
                           
                //2.Conectarnos al API
                const URL = "@Url.Content("~/Login/Enter")";
            
                //3. Enviar los paramentros
                let parametros = $(this).serialize();

                $.post(URL, parametros, function (respuesta)
                {
                    if (respuesta == "200")
                    {
                        document.location.href = "@Url.Content("~/")"
                    }
                    else
                    {
                        alert(respuesta);
                    }
                });
            });
        });

        
    </script>
}